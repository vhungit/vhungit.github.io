System.register("chunks:///_virtual/BoxMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./BoxCtrl.ts","./GameDefine.ts","./Gameconfig.ts"],(function(t){"use strict";var n,i,o,e,r,s,a,c,l,h,u,f,d,x,p,g,m;return{setters:[function(t){n=t.defineProperty,i=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,c=t._decorator,l=t.Prefab,h=t.Vec3,u=t.math,f=t.instantiate,d=t.Component},function(t){x=t.Utils},function(t){p=t.BoxCtrl},function(t){g=t.Direction},function(t){m=t.Gameconfig}],execute:function(){var C,B,b,y,w,S,I;a._RF.push({},"069d2bYyQ9KT6vcjaRR6O+b","BoxMgr",void 0);var v=c.ccclass,R=c.property;t("BoxMgr",(C=v("BoxMgr"),B=R(l),C((I=S=function(t){function i(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,e(r(i),"boxPrefabs",w,r(i)),n(r(i),"count",0),n(r(i),"direction",g.Forward),n(r(i),"position",h.ZERO.clone()),n(r(i),"IsShouldChangeDirection",!1),n(r(i),"nextBox",null),n(r(i),"nextBoxCtrl",null),n(r(i),"currentBoxCtrl",null),i}o(i,t);var a=i.prototype;return a.onLoad=function(){i.instance=this},a.start=function(){},a.Spwan=function(){this.currentBoxCtrl=this.nextBoxCtrl;var t=m.Instance.GetSize(this.count),n=m.Instance.GetDistance(this.count),i=u.randomRange(t.min,t.max);if(0==this.count)this.direction=g.Forward;else if(1==this.count)this.direction=g.Forward,this.position.add(new h(0,0,1).multiplyScalar(u.randomRange(n.min,n.max)));else if(this.count>1){this.IsShouldChangeDirection=u.randomRangeInt(0,10)>=5,this.IsShouldChangeDirection&&(this.direction=this.direction==g.Forward?g.Left:g.Forward);var o=this.direction==g.Forward?new h(0,0,1):new h(1,0,0);this.position.add(o.multiplyScalar(u.randomRange(n.min,n.max)))}this.HasGift(this.count);var e=u.randomRangeInt(0,this.boxPrefabs.length);this.nextBox=f(this.boxPrefabs[e]),this.nextBox.parent=this.node,this.nextBox.name=this.count.toString(),this.nextBoxCtrl=this.nextBox.getComponent(p),this.nextBoxCtrl.Spwan(this.position,i,null,this.count>0),this.count++,this.CleanPlatform(),console.log("Spwan box: "+this.count)},a.CleanPlatform=function(){var t=this;this.node.children.forEach((function(n){parseInt(n.name)<t.count-5&&n.destroy()}))},a.Reset=function(){this.count=0,this.position=h.ZERO.clone(),this.IsShouldChangeDirection=!1,x.destroyAllChild(this.node),this.Spwan()},a.OnLanding=function(){m.Instance.CheckGiftForStep(this.count),this.nextBoxCtrl.OnLanding()},a.HasGift=function(t){return m.Instance.HasGift(t)},s(i,null,[{key:"Instance",get:function(){return i.instance}}]),i}(d),n(S,"instance",null),w=i((y=I).prototype,"boxPrefabs",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=y))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/AudioMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./GameDefine.ts"],(function(i){"use strict";var o,u,t,n,s,c,a,e,r,l;return{setters:[function(i){o=i.defineProperty,u=i.inheritsLoose,t=i.assertThisInitialized,n=i.createClass},function(i){s=i.cclegacy,c=i._decorator,a=i.AudioSource,e=i.Component},function(i){r=i.Utils},function(i){l=i.SoundName}],execute:function(){var d,h,S;s._RF.push({},"1268aruiMJMSbuwaNTXSCd4","AudioMgr",void 0);var p=c.ccclass;c.property,i("AudioMgr",p("AudioMgr")((S=h=function(i){function s(){for(var u,n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return u=i.call.apply(i,[this].concat(s))||this,o(t(u),"audioClips",[]),o(t(u),"audioSourceSFX",null),o(t(u),"audioSourceMusic",null),o(t(u),"IsEnable",!0),u}u(s,i);var c=s.prototype;return c.onLoad=function(){s.instance=this,this.audioSourceSFX=this.addComponent(a),this.audioSourceSFX.loop=!1,this.audioSourceMusic=this.addComponent(a)},c.PlayOneShot=function(i){this.audioSourceSFX.playing&&this.audioSourceSFX.stop(),i&&this.IsEnable&&(this.audioSourceSFX.clip=i,this.audioSourceSFX.play())},c.PlayMusic=function(i,o){i&&this.IsEnable&&(this.audioSourceMusic.clip==i&&this.audioSourceMusic.playing||(this.Stop(),this.audioSourceMusic.clip=i,this.audioSourceMusic.loop=o,this.audioSourceMusic.play()))},c.Stop=function(){this.audioSourceMusic.stop()},c.Load=function(i){var o=this;Object.keys(l).forEach((function(u){var t=l[u];r.getAudioBoundle(i,"sounds/"+t,(function(i){i?(i.name=t,o.audioClips.push(i),console.log("Sound load: "+t),t==l.BackgroundMusic&&o.PlayMusicWithName(t,!0)):console.error("Sound notfound: "+t)}))}))},c.PlaySfx=function(i){var o=this;this.audioClips.forEach((function(u){u.name==i&&o.PlayOneShot(u)}))},c.StopSfx=function(i){var o=this;this.audioClips.forEach((function(u){u.name==i&&o.audioSourceSFX.clip==u&&o.audioSourceSFX.playing&&o.audioSourceSFX.stop()}))},c.PlayMusicWithName=function(i,o){var u=this;this.audioClips.forEach((function(t){t.name==i&&u.PlayMusic(t,o)}))},c.On=function(){this.IsEnable=!0},c.Off=function(){this.IsEnable=!1,this.Stop()},n(s,null,[{key:"Instance",get:function(){return this.instance}}]),s}(e),o(h,"instance",null),d=S))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/EventListener.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,s,r,i,c;return{setters:[function(e){n=e.defineProperty,t=e.inheritsLoose,s=e.createClass},function(e){r=e.cclegacy,i=e._decorator,c=e.EventTarget}],execute:function(){var u,a,o;r._RF.push({},"1ca1cfU43pFM64dVb9njsy1","EventListener",void 0);var l=i.ccclass;i.property,e("EventListener",l("EventListener")((o=a=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),s(n,null,[{key:"Instance",get:function(){return null==this.instance&&(this.instance=new n),this.instance}}]),n}(c),n(a,"instance",null),u=o))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/ItemMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Profile.ts","./Gameconfig.ts"],(function(e){"use strict";var t,r,n,i,a,o,s,c,u,f,l,p,m,h;return{setters:[function(e){t=e.defineProperty,r=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,c=e._decorator,u=e.Prefab,f=e.math,l=e.instantiate,p=e.Component},function(e){m=e.Profile},function(e){h=e.Gameconfig}],execute:function(){var d,g,b,P,y,I,v,w,S;s._RF.push({},"26d1f1pUHxNjqPd1Llm4POh","ItemMgr",void 0);var L=c.ccclass,M=c.property;e("ItemMgr",(d=L("ItemMgr"),g=M(u),b=M(u),d((S=w=function(e){function r(){for(var r,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return r=e.call.apply(e,[this].concat(o))||this,i(a(r),"itemPrefabs",I,a(r)),i(a(r),"specialItemPrefabs",v,a(r)),t(a(r),"rewardStatus",[]),r}n(r,e);var s=r.prototype;return s.onLoad=function(){r.instance=this},s.Reset=function(){this.rewardStatus=[]},s.Create=function(){var e=f.randomRangeInt(0,this.itemPrefabs.length),t=this.itemPrefabs[e];return l(t)},s.CheckDropSpecialItem=function(){var e=this,t=h.Instance.RewardScoreList,r=m.Instance.Score,n=-1;return t.forEach((function(t,i){if(r>=t&&-1==e.rewardStatus.indexOf(t))return e.rewardStatus.push(t),void(n=i)})),n},o(r,null,[{key:"Instance",get:function(){return r.instance}}]),r}(p),t(w,"instance",null),I=r((y=S).prototype,"itemPrefabs",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=r(y.prototype,"specialItemPrefabs",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=y))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/MaxApiUtils.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var i,o;return{setters:[function(n){i=n.defineProperty},function(n){o=n.cclegacy}],execute:function(){o._RF.push({},"28774sywudKJaUfJ3kzaJm/","MaxApiUtils",void 0);var e=n("default",function(){function n(){}return n.RegisterNoti=function(n){window.MaxApi?window.MaxApi.observer("DIS_RECEIVE_NOTI",(function(i){console.log("[DIS_RECEIVE_NOTI] "+i),n(i)})):n(null)},n.GetProfile=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.getProfile((function(i){n(i)})):n()}))},n.UploadImage=function(n){return new Promise((function(i,o){var e={path:"base64-upload",files:n,options:{loading:!0}};window.MaxApi?window.MaxApi.uploadImage(e,(function(n){n.status;var o=n.response,e=o.url;e&&e.length>0&&e.indexOf("http")>=0?i(e):i(o)})):i(null)}))},n.GetDeviceInfo=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.getDeviceInfo((function(i){n(i)})):n(null)}))},n.CheckHighPerformanceDevice=function(){return new Promise((function(n,i){window.MaxApi?window.MaxApi.isHighPerformanceDevice((function(i){n(i)})):n(!0)}))},n.closeGame=function(){window.MaxApi&&window.MaxApi.dismiss()},n.copyToClipboard=function(n,i){window.MaxApi&&window.MaxApi.copyToClipboard(n,i)},n.openWeb=function(n){window.MaxApi.openWeb({url:n})},n.startFeatureCode=function(n,i,o){window.MaxApi?window.MaxApi.startFeatureCode(n,i,o):o(!0)},n.checkPermission=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.checkPermission(n,(function(n){i(n)})):i("granted")}))},n.requestPermission=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.requestPermission(n,(function(n){i(n)})):i("granted")}))},n.getContacts=function(){return new Promise((function(n){if(window.MaxApi){window.MaxApi.getContacts({paramsContact:{allowNonMomo:!1,autoFocus:!0,isAllowMerchant:!1,showPopupNonMomo:!1,allowAgency:!1,allowMultipleSelection:!0},title:"MegaLuckyWheel"},(function(i){n(i)}))}else n([])}))},n.getAvatarEndPoint=function(){var n=this;return new Promise((function(i){window.MaxApi?(n.avatarEndpoint.length>0&&i(n.avatarEndpoint),window.MaxApi.getAvatarEndPoint((function(o){n.avatarEndpoint=o,i(o)}))):i("")}))},n.getContact=function(){return new Promise((function(n){window.MaxApi?window.MaxApi.getContact({},(function(i){n(i)})):n([])}))},n.goBack=function(){return new Promise((function(n){window.MaxApi?window.MaxApi.goBack((function(i){n(i)})):n("denied")}))},n.getScreenShot=function(n){window.MaxApi?window.MaxApi.getScreenShot(n):n("")},n.saveImage=function(n){return new Promise((function(i){window.MaxApi?window.MaxApi.requestPermission("storage",(function(o){"granted"===o?window.MaxApi.saveImage(n,(function(n){n?(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh thành công"}),i(!0)):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),i(!1))})):(window.MaxApi.showToast({duration:5e3,title:"Lưu hình ảnh không thành công"}),i(!1))})):i(!1)}))},n.shareFacebook=function(n,i){window.MaxApi?window.MaxApi.shareFacebook(n,i):i("")},n.facebookMsg=function(n){var i="fb-messenger://share/?link="+n;window.MaxApi&&window.MaxApi.openURL(i)},n.moreMenu=function(n,i,o,e){return new Promise((function(t){if(UserProfile.Instance.IsBrowser)t(!1);else{var a={title:n,message:o,url:e,subject:i};window.MaxApi.share(a,(function(n){t(n)}))}}))},n.copyLink=function(n){window.MaxApi&&window.MaxApi.copyToClipboard(n,"Đã sao chép")},n.trackEvent=function(n){window.MaxApi&&window.MaxApi.trackEvent("luckywheelcocos_game",n)},n.showToast=function(n,i){void 0===i&&(i=3e3),window.MaxApi&&window.MaxApi.showToast({duration:i,title:n})},n}());i(e,"avatarEndpoint",""),o._RF.pop()}}}));

System.register("chunks:///_virtual/Gameconfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./Api.ts","./Profile.ts","./NetworkMgr.ts"],(function(t){"use strict";var e,n,i,a,s,r,o,u,c,f,l,h;return{setters:[function(t){e=t.defineProperty,n=t.inheritsLoose,i=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,o=t.math,u=t.Component},function(t){c=t.Default},function(t){f=t.Api},function(t){l=t.Profile},function(t){h=t.NetworkMgr}],execute:function(){var d,g,m;s._RF.push({},"3067cdUA1dOZIgAYWcOzEaU","Gameconfig",void 0);var p=r.ccclass,v=(r.property,function(){e(this,"step",void 0),e(this,"min",void 0),e(this,"max",void 0)}),S=function(){e(this,"step",void 0),e(this,"min",void 0),e(this,"max",void 0)};t("Gameconfig",p("Gameconfig")((m=g=function(t){function s(){for(var n,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,e(i(n),"data",null),e(i(n),"giftStatus",[]),e(i(n),"giftSegmentStatus",[]),n}n(s,t);var r=s.prototype;return r.GetSize=function(t){if(null!=this.data)for(var e=this.data.item.size,n=t%50,i=e.length-1;i>=0;i--)if(n>=e[i].step)return e[i];var a=new S;return a.step=t,a.min=1,a.max=1,a},r.GetDistance=function(t){if(null!=this.data)for(var e=this.data.item.distances,n=t%50,i=e.length-1;i>=0;i--)if(n>=e[i].step)return e[i];var a=new v;return a.step=t,a.min=1.9,a.max=2.5,a},r.Reset=function(){this.giftStatus=[],this.giftSegmentStatus=[]},r.HasGift=function(t){var e=!1;return null!=this.data&&l.Instance.HasGift&&(e=this.giftStatus[t]),e},r.CheckGiftForStep=function(t){var e=this;null!=this.data&&l.Instance.HasGift&&null!=l.Instance.GameID&&this.data.item.reward.forEach((function(n,i){if(t>=n.from&&t<=n.to)if(-1!=e.giftSegmentStatus.indexOf(i))e.giftStatus.push(t,!1);else{var a=2*o.randomRangeInt(t,n.to+1)<=t+n.to;a&&e.giftSegmentStatus.push(i),e.giftStatus[t]=a}else;}))},r.Fetch=function(t){var e=this;h.getRequest(f.HOST+f.GameConfig,(function(n){n&&n.item?(e.data=n,t(!0)):t(!1)}))},a(s,[{key:"IsLoaded",get:function(){return null!=this.data}},{key:"RewardScoreList",get:function(){return null==this.data?c.RewardScoreList:this.data.item.checkpoint}},{key:"MaxScore",get:function(){var t=this.RewardScoreList;return t[t.length-1]+t[0]}},{key:"ScoreRange",get:function(){return null!=this.data?this.data.item.point:c.ScoreRange}},{key:"Power",get:function(){return null!=this.data?this.data.item.power:c.Power}},{key:"EventLink",get:function(){return null==this.data?"":this.data.item.eventLink}}],[{key:"Instance",get:function(){return s.instance||(s.instance=new s),s.instance}}]),s}(u),e(g,"instance",null),d=m))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameDefine.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,o;return{setters:[function(e){n=e.defineProperty},function(e){o=e.cclegacy}],execute:function(){var t,i,a,r,u;e({Direction:void 0,EventName:void 0,Mission:void 0,SoundName:void 0,TouchState:void 0}),o._RF.push({},"49ae6bXO6tNtK58MjJ4XsZJ","GameDefine",void 0),function(e){e.BackgroundMusic="bg",e.Jump="landing",e.PreJump="prejump",e.Dead="die",e.Landing="landing",e.Spawn="spawn",e.Gameover="gameover",e.GetGift="gift"}(t||(t=e("SoundName",{}))),function(e){e.OnUpdateUserInfo="on-update-userinfo",e.OnUpdateTurn="on-update-turn"}(i||(i=e("EventName",{}))),function(e){e.ShareFacebook="share_fb",e.FirstLogin="first_login"}(a||(a=e("Mission",{}))),function(e){e[e.None=0]="None",e[e.Down=1]="Down",e[e.Press=2]="Press",e[e.Up=3]="Up"}(r||(r=e("TouchState",{}))),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Forward=2]="Forward",e[e.Backward=3]="Backward"}(u||(u=e("Direction",{})));var c=e("GameDefine",(function(){}));n(c,"STEP_FORCE",3),n(c,"MAX_FORCE",11),n(c,"MIN_FORCE",6),n(c,"STEP_MAX_SCORE",10);var s=e("Default",(function(){}));n(s,"ScoreRange",[20,6,4,2,1]),n(s,"RewardScoreList",[100,200,300]),n(s,"Power",[3,3]),n(s,"distance",[1.9,3]);var d=e("Layer",(function(){}));n(d,"Ground",1),n(d,"Player",2),n(d,"Box",4),n(d,"Item",8),o._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,o,r,l,i,u;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,o=n._decorator,r=n.ParticleSystem,l=n.resources,i=n.Prefab,u=n.AudioClip}],execute:function(){var c;e._RF.push({},"524f1gsDoNErLJFctS0Tj+M","Utils",void 0);var a=o.ccclass;o.property,n("Utils",a("Utils")(c=function(){function n(){}return n.PlayParticle=function(n){n.play(),n.getComponentsInChildren(r).forEach((function(n){n.play()}))},n.StopParticle=function(n){n.stop(),n.getComponentsInChildren(r).forEach((function(n){n.stop()}))},n.destroyAllChild=function(n){n.children.forEach((function(n){n.destroy()})),n.removeAllChildren()},n.getPrefabRes=function(n,t){l.load(n,i,(function(n,e){n?t&&t(null):t&&t(e)}))},n.getAudioRes=function(n,t){l.load(n,u,(function(n,e){n?t&&t(null):t&&t(e)}))},n.getPrefabBoundle=function(n,t,e){n.load(t,i,(function(n,t){n?e&&e(null):e&&e(t)}))},n.getAudioBoundle=function(n,t,e){n.load(t,u,(function(n,t){n?e&&e(null):e&&e(t)}))},t(n,null,[{key:"uuid",get:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==t?e:3&e|8).toString(16)}))}}]),n}())||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Api.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,s;return{setters:[function(e){i=e.defineProperty},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"6478a4A+/ZPo5+fjQN0Ek1S","Api",void 0);var t=e("Api",(function(){}));i(t,"DEBUG_TOKEN","0938314514"),i(t,"IS_DEV",!0),i(t,"VERSION","0.0.1"),i(t,"DEV_HOST","https://m.dev.mservice.io/"),i(t,"PROD_HOST","https://m.mservice.io/"),i(t,"HOST",t.IS_DEV?t.DEV_HOST:t.PROD_HOST),i(t,"GAME","pigjump"),i(t,"GAME_ID","vn_momo_web_momojump_game"),i(t,"SERVICE_NAME","pigjump"),i(t,"APPVARZ_V2","/varz/v2/observe"),i(t,"GameConfig","pigjump-config/v1/get_config"),i(t,"GameTurn","pigjump-game-logic/v1/turn"),i(t,"AddTurn","pigjump-game-logic/v1/add_turn"),i(t,"SubmitScore","pigjump-score/v1/submit"),i(t,"StartGame","pigjump-game-logic/v1/start"),i(t,"GameGift","pigjump-score/v1/get_gift?gameId="),i(t,"Mission","gnosis-mission-service/v1/status?game_id=pigjump"),i(t,"MissionCompleted","gnosis-mission-service/v1/send-succeeded-event"),i(t,"GiftHistory","pigjump-score/v1/get_gift_history/{0}/{1}"),i(t,"Avatar","https://s3-ap-southeast-1.amazonaws.com/avatars.mservice.io/{0}.png"),s._RF.pop()}}}));

System.register("chunks:///_virtual/AssetMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts"],(function(n){"use strict";var t,e,r,s,o,c,u,i;return{setters:[function(n){t=n.defineProperty,e=n.inheritsLoose,r=n.createClass},function(n){s=n.cclegacy,o=n._decorator,c=n.assetManager,u=n.Component},function(n){i=n.AudioMgr}],execute:function(){var a,l,p;s._RF.push({},"67aa1RXrxpDSpvvCVnAeht+","AssetMgr",void 0);var f=o.ccclass;o.property,n("AssetMgr",f("AssetMgr")((p=l=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var s=t.prototype;return s.onLoad=function(){t.instance=this},s.start=function(){},s.Load=function(){c.loadBundle("boundle",(function(n,t){i.Instance.Load(t)}))},r(t,null,[{key:"Instance",get:function(){return t.instance}}]),t}(u),t(l,"instance",null),a=p))||a);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./Api.ts","./MaxApiUtils.ts","./Profile.ts","./NetworkMgr.ts","./Gameconfig.ts","./BoxMgr.ts","./AudioMgr.ts","./ItemMgr.ts","./AssetMgr.ts","./CameraCtrl.ts","./Input.ts","./Player.ts"],(function(t){"use strict";var e,n,a,i,r,s,o,c,u,f,h,l,S,m,p,d,g,I,k,y,T,P,v,G,w,C;return{setters:[function(t){e=t.defineProperty,n=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,c=t._decorator,u=t.Vec3,f=t.math,h=t.Component},function(t){l=t.SoundName,S=t.Mission,m=t.Direction},function(t){p=t.Api},function(t){d=t.default},function(t){g=t.Profile},function(t){I=t.NetworkMgr},function(t){k=t.Gameconfig},function(t){y=t.BoxMgr},function(t){T=t.AudioMgr},function(t){P=t.ItemMgr},function(t){v=t.AssetMgr},function(t){G=t.CameraCtrl},function(t){w=t.Input},function(t){C=t.Player}],execute:function(){var M,b,O,F,E,N,R;o._RF.push({},"6d146Tt/kZC6KzQpSN9ul80","GameMgr",void 0);var _,A=c.ccclass,L=c.property;!function(t){t[t.Init=0]="Init",t[t.CheckToken=1]="CheckToken",t[t.FirstStart=2]="FirstStart",t[t.GameConfig=3]="GameConfig",t[t.FetchGameTurn=4]="FetchGameTurn",t[t.OutOffTurn=5]="OutOffTurn",t[t.Spawn=6]="Spawn",t[t.Tutorial=7]="Tutorial",t[t.Playing=8]="Playing",t[t.EndGame=9]="EndGame",t[t.NetworkError=10]="NetworkError"}(_||(_={}));t("GameMgr",(M=A("GameMgr"),b=L(C),M((R=N=function(t){function n(){for(var n,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=t.call.apply(t,[this].concat(s))||this,i(r(n),"player",E,r(n)),e(r(n),"state",void 0),e(r(n),"prevState",void 0),e(r(n),"comboCounter",void 0),e(r(n),"firstStart",!0),e(r(n),"isPause",!1),n}a(n,t);var o=n.prototype;return o.onLoad=function(){},o.start=function(){n.instance=this,v.Instance.Load(),this.Retry()},o.update=function(t){switch(this.state){case _.Init:break;case _.OutOffTurn:!this.IsPause&&w.IsTouchDown&&this.SetState(_.OutOffTurn);break;case _.Spawn:this.player.IsReadyToPlay&&this.SetState(_.Tutorial);break;case _.Tutorial:!this.IsPause&&w.IsTouchDown&&(this.SetState(_.Playing),this.CallStartGame(),d.trackEvent('{"action":"home_tap_start"}'));break;case _.EndGame:}},o.AddScore=function(t,e){var n=y.Instance.count-1;g.Instance.AddScore(n,t,y.Instance.HasGift(n)),0==e?(this.Perfect(),this.comboCounter++):1==e?(this.Good(),this.comboCounter++):this.comboCounter=0},o.SetState=function(t){var e=this;switch(this.prevState=this.state,this.state=t,console.log("[GameMgr] stage "+_[this.prevState]+"  "+_[this.state]),t){case _.Init:g.Instance.Reset(),y.Instance.Reset(),this.player.Retry(),G.Instance.Reset(),P.Instance.Reset(),this.SetState(_.GameConfig),T.Instance.PlayMusicWithName(l.BackgroundMusic,!0);break;case _.GameConfig:k.Instance.IsLoaded?this.SetState(_.FirstStart):k.Instance.Fetch((function(t){t?e.SetState(_.FirstStart):e.SetState(_.NetworkError)}));break;case _.FirstStart:this.firstStart?(this.firstStart=!1,this.MissionFirstLogin(S.FirstLogin,(function(t){e.SetState(_.FetchGameTurn)})),d.trackEvent('{"stage":"home_tutorial"}')):this.SetState(_.FetchGameTurn);break;case _.FetchGameTurn:g.Instance.FetchGameTurn((function(t){-1==t?e.SetState(_.NetworkError):0==t?e.SetState(_.OutOffTurn):e.SetState(_.Spawn)}));break;case _.OutOffTurn:this.isPause=!0;break;case _.Spawn:break;case _.Tutorial:this.player.Playing();break;case _.EndGame:T.Instance.Stop(),T.Instance.PlaySfx(l.Gameover),d.trackEvent('{"state":"game_end", "end_score":'+g.Instance.Score+"}"),d.trackEvent('{"state":"game_result"}');break;case _.NetworkError:}},o.CallStartGame=function(){var t=this;g.Instance.FetchGameID((function(e){e&&t.SetState(_.NetworkError)}))},o.OnLanding=function(){y.Instance.OnLanding(),this.SpwanNextPlatform()},o.SpwanNextPlatform=function(){if(y.Instance.Spwan(),y.Instance.direction==m.Left){var t=this.player.Position.clone();t.y=0;var e=u.distance(t,y.Instance.position)/2;G.Instance.MoveTo(new u(e,0,0).add(this.player.Position))}else G.Instance.MoveTo(this.player.Position)},o.GameOver=function(){this.Retry()},o.Retry=function(){this.node.active=!0,this.SetState(_.Init)},o.Pause=function(){this.isPause=!0,this.node.active=!1},o.Resume=function(){this.isPause=!1,this.node.active=!0},o.RetryNetwork=function(){this.SetState(this.prevState)},o.TryFetchGameTurn=function(){this.state==_.OutOffTurn&&this.SetState(_.FetchGameTurn)},o.Good=function(){},o.Perfect=function(){},o.PickupItem=function(t){},o.OnNetworkError=function(){this.SetState(_.NetworkError)},o.MissionFirstLogin=function(t,e){var n={game_id:"pigjump",mission_id:t,partner_ids:[]};I.postRequest(p.HOST+p.MissionCompleted,n,(function(t){e(t&&t.result)}))},o.CheckAndShowOutOffTurn=function(){g.Instance.Turn<=0?this.isPause=!0:this.Resume()},s(n,[{key:"ComboCounter",get:function(){return this.comboCounter}},{key:"CombpCounter",set:function(t){this.comboCounter=t}},{key:"IsTutorial",get:function(){return this.state==_.Tutorial}},{key:"IsPause",get:function(){return this.isPause}},{key:"PowerSpeed",get:function(){var t=k.Instance.Power,e=t[0]+.05*y.Instance.count;return e=f.clamp(e,t[0],t[1])}}],[{key:"Instance",get:function(){return n.instance}}]),n}(h),e(N,"instance",null),E=n((F=R).prototype,"player",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=F))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./GameDefine.ts","./Profile.ts","./Gameconfig.ts","./BoxMgr.ts","./AudioMgr.ts","./Input.ts","./Item.ts","./GameMgr.ts"],(function(t){"use strict";var e,i,n,o,r,a,s,c,l,u,h,f,d,p,y,m,I,P,g,S,D,w,E,b,N,C,T,A,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.defineProperty,a=t.createClass},function(t){s=t.cclegacy,c=t._decorator,l=t.RigidBody,u=t.Collider,h=t.Animation,f=t.ParticleSystem,d=t.math,p=t.Vec3,y=t.tween,m=t.Quat,I=t.Component},function(t){P=t.Utils},function(t){g=t.GameDefine,S=t.SoundName,D=t.Direction,w=t.Layer},function(t){E=t.Profile},function(t){b=t.Gameconfig},function(t){N=t.BoxMgr},function(t){C=t.AudioMgr},function(t){T=t.Input},function(t){A=t.Item},function(t){v=t.GameMgr}],execute:function(){var L,R,M,k,x,O,G,F,_,B,J,z,U,j,W,V,K;s._RF.push({},"9c53djC1E5KE4urHUt9kq7J","Player",void 0);var X,H=c.ccclass,q=c.property;!function(t){t[t.NONE=0]="NONE",t[t.INIT=1]="INIT",t[t.SPAWN=2]="SPAWN",t[t.IDLE=3]="IDLE",t[t.JUMP=4]="JUMP",t[t.LANDING=5]="LANDING",t[t.DEAD=6]="DEAD"}(X||(X={}));t("Player",(L=H("Player"),R=q(l),M=q(u),k=q(h),x=q(f),O=q(f),G=q(f),F=q(f),L((J=e((B=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"rb",J,o(e)),n(o(e),"collider",z,o(e)),n(o(e),"animation",U,o(e)),n(o(e),"landingEffect",j,o(e)),n(o(e),"idleParticle",W,o(e)),n(o(e),"spawnEffect",V,o(e)),n(o(e),"powerEffect",K,o(e)),r(o(e),"scorePos",void 0),r(o(e),"state",void 0),r(o(e),"isTouchDown",void 0),r(o(e),"isCirclePower",!1),r(o(e),"isReadyToPlay",void 0),r(o(e),"shouldPlayAfterSpawn",void 0),r(o(e),"force",void 0),r(o(e),"jumpTime",void 0),r(o(e),"powerDir",1),r(o(e),"forceDir",void 0),r(o(e),"direction",void 0),r(o(e),"currentBox",void 0),r(o(e),"timeCounter",0),e}i(e,t);var s=e.prototype;return s.start=function(){this.collider.on("onCollisionEnter",this.onCollisionEnter,this),this.collider.on("onTriggerEnter",this.OnTriggerEnter,this),this.Retry()},s.update=function(t){switch(this.state){case X.IDLE:if(this.timeCounter+=t,this.timeCounter>180){null==E.Instance.GameID?this.timeCounter=0:this.Dead();break}if(v.Instance.IsPause||!T.IsTouchDown||this.isTouchDown||(this.timeCounter=0,this.isTouchDown=!0,this.force=g.MIN_FORCE,this.animation.play("PreJump"),this.ShowPowerEffect(!0),this.idleParticle.stop(),C.Instance.PlaySfx(S.PreJump)),this.isTouchDown){this.force+=t*v.Instance.PowerSpeed*this.powerDir,this.isCirclePower&&(this.force>g.MAX_FORCE||this.force<g.MIN_FORCE)&&(this.powerDir*=-1),this.force=d.clamp(this.force,g.MIN_FORCE,g.MAX_FORCE),this.forceDir=this.direction.clone().multiplyScalar(180*this.force);var e=this.node.scale.clone();e.y=Math.max(1-(this.force-g.MIN_FORCE)/g.MAX_FORCE,.5),this.node.scale=e,N.Instance.currentBoxCtrl.SetScale(e.y),T.IsTouchUp&&(this.isTouchDown=!1,this.node.scale=p.ONE,C.Instance.StopSfx(S.PreJump),this.SetState(X.JUMP))}break;case X.JUMP:this.jumpTime+=t,this.jumpTime>3&&(this.jumpTime=0,this.Dead());break;case X.LANDING:}},s.SetState=function(t){var e=this;if(this.state!=t)switch(console.log("[Player] state "+X[this.state]+"  "+X[t]),this.state=t,t){case X.INIT:this.isTouchDown=!1,this.isReadyToPlay=!1,this.timeCounter=0,this.currentBox=null,this.rb.clearVelocity(),this.rb.isKinematic=!0,this.node.position=new p(0,3,0),this.node.rotation=m.IDENTITY.clone(),this.node.forward=p.FORWARD.clone(),this.SetState(X.SPAWN);break;case X.SPAWN:this.ShowPowerEffect(!1),this.animation.play("Falling"),P.PlayParticle(this.spawnEffect);var i=this.node.position.clone();i.y=1.1,y(this.node).to(2,{position:i}).call((function(){e.rb.isKinematic=!1,e.isReadyToPlay=!0})).start(),C.Instance.PlaySfx(S.Spawn);break;case X.IDLE:P.StopParticle(this.spawnEffect),this.PlayAnimIdle(),this.idleParticle.play();break;case X.LANDING:this.rb.clearVelocity(),this.PlayAnimLanding(),N.Instance.count>1&&this.CaculateScore(),v.Instance.OnLanding(),this.direction=N.Instance.position.clone().subtract(this.node.position),this.direction.normalize(),this.direction.y=Math.tan(d.toRadian(70)*this.direction.length()),this.landingEffect.play(),setTimeout(this.LookatNextPlatform.bind(this),500),C.Instance.PlaySfx(S.Landing);break;case X.JUMP:this.ShowPowerEffect(!1),this.jumpTime=0,this.rb.clearVelocity(),this.rb.applyImpulse(this.forceDir),this.animation.play("Falling"),setTimeout((function(){N.Instance.currentBoxCtrl.Reset()}),200),C.Instance.PlaySfx(S.Jump);break;case X.DEAD:this.idleParticle.stop(),this.animation.play("Die"),setTimeout((function(){v.Instance.GameOver()}),1e3),C.Instance.PlaySfx(S.Dead)}},s.PlayAnimIdle=function(){this.animation.play("Idle"+d.randomRangeInt(0,5))},s.PlayAnimLanding=function(){this.animation.play("Landing")},s.ShowPowerEffect=function(t){t?P.PlayParticle(this.powerEffect):P.StopParticle(this.powerEffect)},s.CaculateScore=function(){var t=this.node.position.clone();t.y=0;var e=p.distance(N.Instance.position,t);e=d.clamp(e,0,(b.Instance.ScoreRange.length-1)/10);var i=Math.round(10*e),n=b.Instance.ScoreRange[i];v.Instance.AddScore(n,i)},s.LookatNextPlatform=function(){if(N.Instance.IsShouldChangeDirection){var t=new m;m.fromEuler(t,0,N.Instance.direction==D.Left?90:0,0),y(this.node).to(.5,{rotation:t},{easing:"backInOut"}).start(),this.SetState(X.IDLE)}else this.SetState(X.IDLE)},s.Landing=function(t){this.state!=X.JUMP&&this.state!=X.INIT&&this.state!=X.SPAWN||t!=this.currentBox&&(this.currentBox=t,this.SetState(X.LANDING))},s.Dead=function(){this.SetState(X.DEAD)},s.Retry=function(){this.SetState(X.INIT)},s.Playing=function(){this.state==X.SPAWN&&this.SetState(X.LANDING)},s.PickupItem=function(t){t&&(v.Instance.PickupItem(t),t.Destroy())},s.onCollisionEnter=function(t){t.otherCollider.node.layer==w.Box?this.Landing(t.otherCollider.node):t.otherCollider.node.layer==w.Ground&&this.Dead()},s.OnTriggerEnter=function(t){t.otherCollider.node.layer==w.Item&&this.PickupItem(t.otherCollider.node.getComponent(A))},a(e,[{key:"Direction",get:function(){return this.direction}},{key:"Position",get:function(){return this.node.position}},{key:"ScorePosition",get:function(){return this.scorePos.position}},{key:"Scoretarget",get:function(){return this.scorePos}},{key:"IsReadyToPlay",get:function(){return this.isReadyToPlay}}]),e}(I)).prototype,"rb",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(B.prototype,"collider",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(B.prototype,"animation",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(B.prototype,"landingEffect",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(B.prototype,"idleParticle",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(B.prototype,"spawnEffect",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(B.prototype,"powerEffect",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=B))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Profile.ts"],(function(e){"use strict";var t,s,n,r,o,a,u,i;return{setters:[function(e){t=e.inheritsLoose},function(e){s=e.cclegacy,n=e._decorator,r=e.assetManager,o=e.SpriteFrame,a=e.Texture2D,u=e.Component},function(e){i=e.Profile}],execute:function(){var c;s._RF.push({},"b72b0V4dQJJTLMgBo4CZ95K","NetworkMgr",void 0);var p=n.ccclass;n.property,e("NetworkMgr",p("NetworkMgr")(c=function(e){function s(){return e.apply(this,arguments)||this}return t(s,e),s.prototype.start=function(){},s.getRequest=function(e,t){var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="json",s.setRequestHeader("Authorization","Bearer "+i.Instance.UserToken),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){if(console.log("state = "+s.readyState+" status ="+s.status),4==s.readyState)if(200==s.status)switch(s.responseType){case"text":t(s.responseText);break;default:t(s.response)}else(s.status>=400||0===s.status)&&t(null)},s.send()},s.postRequest=function(e,t,s){return new Promise((function(n,r){var o=new XMLHttpRequest;o.open("POST",e,!0),o.responseType="json",o.setRequestHeader("Authorization","Bearer "+i.Instance.UserToken),o.setRequestHeader("Content-Type","application/json"),console.log("POST "+e),o.onreadystatechange=function(){if(console.log("state = "+o.readyState+" status ="+o.status),4==o.readyState)if(200==o.status)switch(o.responseType){case"text":s(o.responseText);break;default:s(o.response)}else(o.status>=400||0===o.status)&&s(null)},o.send(JSON.stringify(t))}))},s.geSpriteFrameAsync=function(e){return e=e.replace("img.mservice.io","atc-edge03.mservice.com.vn"),new Promise((function(t,s){r.loadRemote(e,{cacheEnabled:!0,maxRetryCount:0},(function(e,s){if(e)t(null),console.warn(e);else if(s){var n=new o,r=new a;r.image=s,n.texture=r,t(n)}else t(null)}))}))},s}(u))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./AudioMgr.ts"],(function(t){"use strict";var e,n,o,r,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Component},function(t){c=t.SoundName},function(t){i=t.AudioMgr}],execute:function(){var s;n._RF.push({},"d29ecftG0hEILH173Y9QJzY","Item",void 0);var u=o.ccclass;o.property,t("Item",u("Item")(s=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.Destroy=function(){i.Instance.PlaySfx(c.GetGift),this.node.destroy()},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/Input.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts"],(function(t){"use strict";var n,e,o,s,i,c,u,h,a;return{setters:[function(t){n=t.defineProperty,e=t.inheritsLoose,o=t.assertThisInitialized,s=t.createClass},function(t){i=t.cclegacy,c=t._decorator,u=t.Node,h=t.Component},function(t){a=t.TouchState}],execute:function(){var r,p,T;i._RF.push({},"e1c6c5BxUBFlrIibwgDLx5h","Input",void 0);var l=c.ccclass;c.property,t("Input",l("Input")((T=p=function(t){function i(){for(var e,s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i))||this,n(o(e),"state",a.None),n(o(e),"isTouchDown",!1),e}e(i,t);var c=i.prototype;return c.onLoad=function(){i.instance=this,this.node.on(u.EventType.TOUCH_START,this.onTouchBegan,this,!0),this.node.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this,!0),this.node.on(u.EventType.TOUCH_END,this.onTouchEnded,this,!0),this.node.on(u.EventType.TOUCH_CANCEL,this.onTouchCancelled,this,!0)},c.lateUpdate=function(){this.state==a.Down?this.state=a.Press:this.state==a.Up&&(this.state=a.None)},c.onTouchBegan=function(t){t.getTouches();this.isTouchDown=!0,this.state=a.Down},c.onTouchEnded=function(t){t.getTouches();this.isTouchDown=!1,this.state=a.Up},c.onTouchCancelled=function(t){this.isTouchDown=!1,this.state=a.Up},c.onTouchMove=function(t){t.getTouches();this.isTouchDown=!0,this.state=a.Press},c.StopPropagation=function(t){t.propagationStopped=!0},s(i,null,[{key:"Instance",get:function(){return i.instance}},{key:"State",get:function(){return i.instance.state}},{key:"IsTouchDown",get:function(){return i.instance.state==a.Down}},{key:"IsTouchUp",get:function(){return i.instance.state==a.Up}}]),i}(h),n(p,"instance",null),r=T))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/CameraCtrl.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,i,e,s,r,a,c;return{setters:[function(t){n=t.defineProperty,o=t.inheritsLoose,i=t.assertThisInitialized,e=t.createClass},function(t){s=t.cclegacy,r=t._decorator,a=t.tween,c=t.Component}],execute:function(){var l,u,f;s._RF.push({},"e8036dAZtBBzJ7RzVM2ogIj","CameraCtrl",void 0);var p=r.ccclass;r.property,t("CameraCtrl",p("CameraCtrl")((f=u=function(t){function s(){for(var o,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return o=t.call.apply(t,[this].concat(s))||this,n(i(o),"originalPosition",void 0),n(i(o),"offset",void 0),o}o(s,t);var r=s.prototype;return r.onLoad=function(){s.instance=this,this.originalPosition=this.node.position.clone(),this.offset=this.node.position.clone()},r.update=function(t){},r.MoveTo=function(t){var n=t.clone().add(this.offset);n.y=this.originalPosition.y,a(this.node).to(.5,{position:n}).start()},r.Reset=function(){this.node.position=this.originalPosition.clone()},e(s,null,[{key:"Instance",get:function(){return s.instance}}]),s}(c),n(u,"instance",null),l=f))||l);s._RF.pop()}}}));

System.register("chunks:///_virtual/BoxCtrl.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],(function(t){"use strict";var e,i,n,s,a,o,l,c,r,u,h,p,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,a=t.defineProperty,o=t.createClass},function(t){l=t.cclegacy,c=t._decorator,r=t.Animation,u=t.ParticleSystem,h=t.tween,p=t.Vec3,d=t.Component},function(t){f=t.Utils}],execute:function(){var m,y,S,g,P,v,D;l._RF.push({},"ef48bIHqvFOHZl8yLmMTrY4","BoxCtrl",void 0);var w,I=c.ccclass,b=c.property;!function(t){t[t.SPAWN=0]="SPAWN",t[t.IDLE=1]="IDLE"}(w||(w={}));t("BoxCtrl",(m=I("BoxCtrl"),y=b(r),S=b(u),m((v=e((P=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,n(s(e),"animation",v,s(e)),n(s(e),"landingParticle",D,s(e)),a(s(e),"state",void 0),a(s(e),"pos",void 0),a(s(e),"isDropDown",!0),a(s(e),"item",null),a(s(e),"scale",void 0),e}i(e,t);var l=e.prototype;return l.SetState=function(t){var e=this;switch(this.state=t,t){case w.SPAWN:this.isDropDown?h(this.node).to(.5,{position:this.pos},{easing:"cubicIn"}).call((function(){e.SetState(w.IDLE)})).start():(this.node.position=this.pos,this.SetState(w.IDLE));break;case w.IDLE:this.isDropDown&&(this.LandingEffect(),this.landingParticle.play()),setTimeout((function(){e.item&&(e.item.active=!0,e.item.scale=e.item.scale.clone().multiplyScalar(.8),h(e.item).to(.3,{scale:new p(1,1,1)},{easing:"elasticOut"}).start())}),500)}},l.Spwan=function(t,e,i,n){void 0===n&&(n=!0),this.pos=t.clone(),this.scale=e,this.isDropDown=n,this.node.position=t.clone().add3f(0,3,0),this.node.scale=new p(e,1,e),this.SetItem(i),this.SetState(w.SPAWN)},l.OnLanding=function(){this.landingParticle.play()},l.SetItem=function(t){f.destroyAllChild(this.ItemPos),t&&(t.setParent(this.ItemPos),t.position=p.ZERO,t.active=!1),this.item=t},l.SetScale=function(t){this.node.scale=new p(this.scale,t,this.scale)},l.Reset=function(){var t=new p(this.scale,1,this.scale);h(this.node).to(.3,{scale:t},{easing:"bounceInOut"}).start(),this.landingParticle.play()},l.LandingEffect=function(){this.node.scale=this.node.scale.clone().multiplyScalar(.9),h(this.node).to(.3,{scale:new p(this.scale,1,this.scale)},{easing:"elasticOut"}).start()},o(e,[{key:"ItemPos",get:function(){return this.node.getChildByName("Item")}}]),e}(d)).prototype,"animation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"landingParticle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=P))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/Profile.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Utils.ts","./GameDefine.ts","./Api.ts","./EventListener.ts","./MaxApiUtils.ts","./NetworkMgr.ts"],(function(t){"use strict";var e,n,i,s,r,o,a,u,c,f,h,d,l;return{setters:[function(t){e=t.defineProperty,n=t.inheritsLoose,i=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,o=t._decorator,a=t.Component},function(t){u=t.Utils},function(t){c=t.EventName},function(t){f=t.Api},function(t){h=t.EventListener},function(t){d=t.default},function(t){l=t.NetworkMgr}],execute:function(){var g,p,m;r._RF.push({},"fb70chVwDpNe5DpzETj+HsT","Profile",void 0);var I=o.ccclass,k=(o.property,function(){e(this,"progress",[]),e(this,"score",void 0),e(this,"turn",void 0),e(this,"id","01234567890"),e(this,"token","")});t("Profile",I("Profile")((m=p=function(t){function r(){for(var n,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return n=t.call.apply(t,[this].concat(r))||this,e(i(n),"data",new k),e(i(n),"hasGift",!1),e(i(n),"gameID",""),n}n(r,t);var o=r.prototype;return o.Progress=function(){return this.data.progress},o.onLoad=function(){var t=this;r.instance=this,d.GetProfile().then((function(e){t.OnUpdateUserInfo(e)}))},o.LoadAvatar=function(){},o.OnUpdateUserInfo=function(t){t||(t={userid:f.DEBUG_TOKEN,token:f.DEBUG_TOKEN}),this.UserID=t.userid,this.UserToken=t.token,this.LoadAvatar(),h.Instance.emit(c.OnUpdateUserInfo,t,this)},o.Reset=function(){this.data.score=0,this.data.progress=[],this.gameID="",console.log("Reset Profile")},o.AddScore=function(t,e,n){},o.FetchGameTurn=function(t){var e=this;l.getRequest(f.HOST+f.GameTurn,(function(n){n&&n.item?e.Turn=n.item.balance:e.Turn=-1,t(e.Turn),h.Instance.emit(c.OnUpdateTurn,e.Turn)}))},o.FetchGameID=function(t){var e=this;l.postRequest(f.HOST+f.StartGame,{requestId:u.uuid},(function(n){n&&n.item?(e.gameID=n.item.gameId,e.hasGift=n.item.hasGift,t(!0),console.log("GameID: "+e.gameID)):t(!1)}))},s(r,[{key:"Score",get:function(){return this.data.score}},{key:"GameID",get:function(){return this.gameID},set:function(t){this.gameID=t}},{key:"Turn",get:function(){return this.data.turn},set:function(t){this.data.turn=t}},{key:"UserID",get:function(){return this.data.id},set:function(t){this.data.id=t}},{key:"UserToken",get:function(){return this.data.token},set:function(t){this.data.token=t}},{key:"HasGift",get:function(){return this.hasGift},set:function(t){this.hasGift=t}}],[{key:"Instance",get:function(){return r.instance}}]),r}(a),e(p,"instance",null),g=m))||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/resources",["./Utils.ts","./BoxCtrl.ts","./GameDefine.ts","./Api.ts","./EventListener.ts","./MaxApiUtils.ts","./Profile.ts","./NetworkMgr.ts","./Gameconfig.ts","./BoxMgr.ts","./AudioMgr.ts","./ItemMgr.ts","./AssetMgr.ts","./CameraCtrl.ts","./Input.ts","./Item.ts","./Player.ts","./GameMgr.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/resources', 'chunks:///_virtual/resources'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});